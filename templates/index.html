<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Medical Report Translator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
    <nav class="navbar">
        <div class="container">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="navbar-logo">
            <span class="navbar-title">Medical Report Translator</span>
        </div>
    </nav>

    <form method="POST" enctype="multipart/form-data">
        <div class="form-row">
            <div class="form-group">
                <label for="file-upload" class="custom-upload">
                    üì§ Choose File (.txt or .docx)
                </label>
                <input type="file" id="file-upload" name="file" accept=".txt,.docx,.pdf" onchange="handleFileChange(event)">
                <div class="file-name-container">
                    {% if file_name %}
                        <label for="file-name-input">Selected File</label>
                 
                    
                       {% endif %}
                       <input type="text" id="file-name-input" class="input-label" name="file_name" value="{{ file_name or 'No file selected' }}" readonly>
                </div>



            </div>

            <div class="form-group">
                <label for="dest_lang">Select Target Language</label>
                <select id="dest_lang" name="dest_lang" required>
                    <option value="en" {% if dest_lang=='en' %}selected{% endif %}>English</option>
                    <option value="fr" {% if dest_lang=='fr' %}selected{% endif %}>French</option>
                    <option value="de" {% if dest_lang=='de' %}selected{% endif %}>German</option>
                    <!-- Add more languages here -->
                </select>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="original_text">Original Text {% if detected_lang %}<small>(Detected: {{ detected_lang
                        }})</small>{% endif %}</label>
                <textarea id="original_text" name="original_text">{{ original }}</textarea>
            </div>

            <div class="form-group">
                <label for="translated_text">Translated Text</label>
                <textarea id="translated_text" readonly>{{ translated }}</textarea>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <button type="submit" name="action" value="translate" onclick="showSpinner()">üîÅ Translate</button>
                <span class="spinner" id="loadingSpinner">‚è≥ Translating...</span>
            </div>
        </div>
    </form>

    <script>
        function showSpinner() {
            document.getElementById('loadingSpinner').classList.add('show');
        }
        function handleFileChange(event) {
            const fileInput = event.target;
            const fileNameInput = document.getElementById('file-name-input');

            if (fileInput.files.length > 0) {
                const name = fileInput.files[0].name;
                fileNameInput.value = name;
                fileInput.form.submit();  // auto-submit when file selected
            } else {
                fileNameInput.value = '';
            }
        }


    </script>

<footer class="footer">
    <p>&copy; {{ current_year }} m.bufano Universit√§ts Klinikum Freiburg. All rights reserved.</p>
</footer>


</body>

</html>